Microsoft (R) Macro Assembler Version 6.14.8444		    06/07/23 21:46:28
ъєЁёрў.asm						     Page 1 - 1


				.386
				;Задайте объём ПЗУ в байтах
 = 1000				RomSize    EQU   4096

 = 00FE							ADC_InPort = 0FEh
 = 00FE							ButtonInPort = 0FEh
 = 00FC							IncDecButtonPort = 0FCh
 = 00F7							ADC_OutPort = 0F7h
 = 00F7							ADCOutPort1 = 0F7h
 = 00FD							ADCOutPort2 = 0FDh
 = 00FA							SensorsOutPort = 0FAh
 = 00FE							DisplayOutPort = 0FEh
 = 00FC							DisplayOutPowerPort = 0FCh
 = 00FD							DisplaySensorOutPort = 0FDh
 = 00FB							DisplaySensorOutPowerPort = 0FBh
 = 00FA							CompressorsPort = 0FAh
 = 0032							NMax = 50

 0000				IntTable   SEGMENT use16 AT 0
				;Здесь размещаются адреса обработчиков прерываний
 0000				IntTable   ENDS

 0000				Data       SEGMENT use16 AT 40h
				;Здесь размещаются описания переменных

 0000 00						TemperatureFridge db ?
 0001  0003 [						TemperatureFridgeBCD db 3 dup(?)
        00
       ]
 0004  0003 [						TemperatureFridgeBCD_Old db 3 dup(?)
        00
       ]
 0007  0002 [						TemperatureFridgeBCD_Repair db 2 dup(?)
        00
       ]
 0009  0002 [						SelectedTemperatureFridge db 2 dup (?)
        00
       ]
 000B 00						TemperatureFreezer db ?
 000C  0003 [						TemperatureFreezerBCD db 3 dup(?)
        00
       ]
 000F  0003 [						TemperatureFreezerBCD_Old db 3 dup(?)
        00
       ]
 0012  0002 [						TemperatureFreezerBCD_Repair db 2 dup (?)
        00
       ]
 0014  0002 [						SelectedTemperatureFreezer db 2 dup (?)
        00
       ]
 0016 00						DoorFridgeOpenFlag db ?
 0017 00						DoorFreezerOpenFlag db ?
 0018 00						FreezingFlag db ?
 0019  000A [						DataHexArr db 10 dup(?) 
        00
       ]
 0023  000A [						DataHexTabl db 10 dup(?)
        00
       ]
 002D 00						OldIncDecButtonsImage db ?
 002E 00						WaitModeFridge db ?
 002F 00						WaitModeFreezer db ?
 0030 0000						TempretureFreezerOn dw ?
 0032 00						FridgeCompressor db ?
 0033 00						FreezerCompressor db ?
 0034 00						RepairFlag db ?
 0035  0002 [						TimerFridge dw 2 dup (?)
        0000
       ]
 0039  0002 [						TimerFreezer dw 2 dup (?)
        0000
       ]
 003D 00						TimeOutFlagFridge db ?
 003E 00						TimeOutFlagFreezer db ?

 003F				Data       ENDS

				;Задайте необходимый адрес стека
 0000				Stk        SEGMENT use16 AT 2000h
				;Задайте необходимый размер стека
 0000  0010 [			           dw    16 dup (?)
        0000
       ]
 0020				StkTop     Label Word
 0020				Stk        ENDS

 0000				InitData   SEGMENT use16
 0000				InitDataStart:
				;Здесь размещаются описания констант



 0000				InitDataEnd:
 0000				InitData   ENDS

 0000				Code       SEGMENT use16
				;Здесь размещаются описания констант

				           ASSUME cs:Code,ds:Data,es:Data
						   
 0000 00 01 02 03 04 05				   HexArr DB 00h,01h,02h,03h,04h,05h,06h,07h,08h,09h
       06 07 08 09
 000A 3F 0C 76 5E 4D 5B				   HexTabl DB 3Fh,0Ch,76h,5Eh,4Dh,5Bh,7Bh,0Eh,7Fh,5Fh
       7B 0E 7F 5F
						   
 0014				Initialization PROC									;Обнуление всех ячеек
 0014  B8 0000				       mov ax, 0
 0017  88 26 0034 R				   mov RepairFlag, ah
 001B  88 26 0032 R				   mov FridgeCompressor, ah
 001F  88 26 0033 R				   mov FreezerCompressor, ah
 0023  A3 0030 R				   mov TempretureFreezerOn, ax
 0026  88 26 000B R				   mov TemperatureFreezer, ah
 002A  88 26 0000 R				   mov TemperatureFridge, ah
 002E  88 26 000C R				   mov TemperatureFreezerBCD, ah
 0032  88 26 000D R				   mov TemperatureFreezerBCD+1, ah
 0036  88 26 000E R				   mov TemperatureFreezerBCD+2, ah
 003A  88 26 0012 R				   mov TemperatureFreezerBCD_Repair, ah
 003E  88 26 0013 R				   mov TemperatureFreezerBCD_Repair+1, ah
 0042  88 26 000F R				   mov TemperatureFreezerBCD_Old, ah
 0046  88 26 0010 R				   mov TemperatureFreezerBCD_Old+1, ah
 004A  88 26 0011 R				   mov TemperatureFreezerBCD_Old+2, ah
 004E  88 26 0001 R				   mov TemperatureFridgeBCD, ah
 0052  88 26 0002 R				   mov TemperatureFridgeBCD+1, ah
 0056  88 26 0003 R				   mov TemperatureFridgeBCD+2, ah
 005A  88 26 0007 R				   mov TemperatureFridgeBCD_Repair, ah
 005E  88 26 0008 R				   mov TemperatureFridgeBCD_Repair+1, ah
 0062  88 26 0004 R				   mov TemperatureFridgeBCD_Old, ah
 0066  88 26 0005 R				   mov TemperatureFridgeBCD_Old+1, ah
 006A  88 26 0006 R				   mov TemperatureFridgeBCD_Old+2, ah
 006E  88 26 0017 R				   mov DoorFreezerOpenFlag, ah
 0072  88 26 0016 R				   mov DoorFridgeOpenFlag, ah
 0076  88 26 0018 R				   mov FreezingFlag, ah
 007A  88 26 0009 R				   mov SelectedTemperatureFridge, ah
 007E  88 26 000A R				   mov SelectedTemperatureFridge+1, ah
 0082  88 26 0014 R				   mov SelectedTemperatureFreezer, ah
 0086  88 26 002E R				   mov WaitModeFridge, ah
 008A  88 26 002F R				   mov WaitModeFreezer, ah
 008E  B4 01					   mov ah, 1h
 0090  88 26 0015 R				   mov SelectedTemperatureFreezer+1, ah
 0094  B8 0000					   mov ax, 0000h
 0097  BB 0000					   mov bx, 0000h
 009A  A3 0035 R				   mov TimerFridge, ax
 009D  89 1E 0037 R				   mov TimerFridge+2, bx
 00A1  A3 0039 R				   mov TimerFreezer, ax
 00A4  89 1E 003B R				   mov TimerFreezer+2, bx
 00A8  E8 061D					   call CopyArr
 00AB  C3					   Ret
 00AC				Initialization ENDP	 

 00AC				ButtonsInput PROC									;обработка кнопок открытия/закрытия дверей, т.к. это кнопки режима и им не нужна обработка дребезга и фронтов
 00AC  E4 FE					   in al, ButtonInPort
 00AE  F6 D0					   not al
 00B0  A8 01					   test al, 01h
 00B2  74 05					   jz NoDoorFridgeOpen
 00B4  C6 06 0016 R 01				   mov DoorFridgeOpenFlag, 01h
 00B9				NoDoorFridgeOpen:
 00B9  A8 02					   test al, 02h
 00BB  74 05					   jz NoDoorFreezerOpen
 00BD  C6 06 0017 R 01				   mov DoorFreezerOpenFlag, 01h
 00C2				NoDoorFreezerOpen:
 00C2  A8 04					   test al, 04h		   
 00C4  74 05					   jz NoFreezingFlag
 00C6  C6 06 0018 R 01				   mov FreezingFlag, 01h
 00CB				NoFreezingFlag:		   
 00CB  C3					   Ret
 00CC				ButtonsInput ENDP 


 00CC				ContactBounceSupressing PROC 
 00CC  8A E0			VD1:       mov   ah,al       ;Сохранение исходного состояния
 00CE  B7 00			           mov   bh,0        ;Сброс счётчика повторений
 00D0  EC			VD2:       in    al,dx       ;Ввод текущего состояния
 00D1  F6 D0					   not al
 00D3  38 C4			           cmp   ah,al       ;Текущее состояние=исходному?
 00D5  75 F5			           jne   VD1         ;Переход, если нет
 00D7  FE C7			           inc   bh          ;Инкремент счётчика повторений
 00D9  80 FF 32			           cmp   bh,NMax     ;Конец дребезга?
 00DC  75 F2			           jne   VD2         ;Переход, если нет
 00DE  8A C4			           mov   al,ah       ;Восстановление местоположения данных
 00E0  C3					   Ret
 00E1				ContactBounceSupressing ENDP


 00E1				IncDecButtonsInput PROC
 00E1  BA 00FC					   mov dx, IncDecButtonPort
 00E4  EC					   in al, dx
 00E5  F6 D0					   not al
 00E7  3A 06 002D R				   cmp al, OldIncDecButtonsImage
 00EB  0F 84 00A2				   je NoPressedButton
 00EF  A2 002D R				   mov OldIncDecButtonsImage, al
 00F2  3C 00					   cmp al, 0h
 00F4  0F 84 0099				   je NoPressedButton
 00F8  E8 FFD1					   call ContactBounceSupressing
						   
 00FB  A8 01					   test al, 1h								;проверка верхнего предела для холодильной камеры
 00FD  74 22					   jz NoPress1
 00FF  8D 36 0009 R				   lea si, SelectedTemperatureFridge
 0103  8A 64 01					   mov ah, [si+1]
 0106  80 FC 01					   cmp ah, 1h
 0109  75 07					   jne notMax1
 010B  8A 24					   mov ah, [si]
 010D  80 FC 02					   cmp ah, 2h
 0110  74 7F					   je NoPressedButton
 0112  8A 64 01			NotMax1:   mov ah, [si+1]
 0115  8A 04					   mov al, [si]
 0117  FE C0					   inc al
 0119  37					   AAA
 011A  88 64 01					   mov [si+1], ah
 011D  88 04					   mov [si], al
 011F  EB 70					   jmp NoPressedButton
						   
 0121  A8 02			NoPress1:  test al, 2h								;проверка нижнего предела для холодильной камеры
 0123  74 22					   jz NoPress2
 0125  8D 36 0009 R				   lea si, SelectedTemperatureFridge
 0129  8A 64 01					   mov ah, [si+1]
 012C  80 FC 00					   cmp ah, 0h
 012F  75 07					   jne notMax2
 0131  8A 24					   mov ah, [si]
 0133  80 FC 00					   cmp ah, 0h
 0136  74 59					   je NoPressedButton
 0138  8A 64 01			NotMax2:   mov ah, [si+1]
 013B  8A 04					   mov al, [si]
 013D  FE C8					   dec al
 013F  3F					   AAS
 0140  88 64 01					   mov [si+1], ah
 0143  88 04					   mov [si], al
 0145  EB 4A					   jmp NoPressedButton
						   
 0147  A8 04			NoPress2:  test al, 4h								;проверка верхнего предела для морозильной камеры
 0149  74 22					   jz NoPress3
 014B  8D 36 0014 R				   lea si, SelectedTemperatureFreezer
 014F  8A 64 01					   mov ah, [si+1]
 0152  80 FC 01					   cmp ah, 1h
 0155  75 07					   jne notMax3
 0157  8A 24					   mov ah, [si]
 0159  80 FC 00					   cmp ah, 0h
 015C  74 33					   je NoPressedButton
 015E  8A 64 01			NotMax3:   mov ah, [si+1]
 0161  8A 04					   mov al, [si]
 0163  FE C8					   dec al
 0165  3F					   AAS
 0166  88 64 01					   mov [si+1], ah
 0169  88 04					   mov [si], al
 016B  EB 24					   jmp NoPressedButton
						   
 016D  A8 08			NoPress3:  test al, 8h									;проверка нижнего предела для холодильной камеры
 016F  74 20					   jz NoPressedButton
 0171  8D 36 0014 R				   lea si, SelectedTemperatureFreezer
 0175  8A 64 01					   mov ah, [si+1]
 0178  80 FC 02					   cmp ah, 2h
 017B  75 07					   jne notMax4
 017D  8A 24					   mov ah, [si]
 017F  80 FC 05					   cmp ah, 5h
 0182  74 0D					   je NoPressedButton
 0184  8A 64 01			NotMax4:   mov ah, [si+1]
 0187  8A 04					   mov al, [si]
 0189  FE C0					   inc al
 018B  37					   AAA
 018C  88 64 01					   mov [si+1], ah
 018F  88 04					   mov [si], al
 0191				NoPressedButton:
						    
 0191  C3					   Ret
 0192				IncDecButtonsInput ENDP


 0192				AdcProcessing  PROC									;подпрограмма для эмуляции среды, замена реальным датчикам
 0192  E6 F7			           out ADC_OutPort, al						;передаются: маска для выделения бита готовности с Ready порта (bl)
 0194  E4 FE			SCtrl1:    in al, ADC_InPort						;			 маска для считывания сигнала Start (al)
 0196  84 C3			           test al, bl								;			 адрес для записи значений (dx)
 0198  74 FA			           jz SCtrl1								; 			 адрес порта для передачи данных (di)
 019A  32 C0					   xor al,al		
 019C  E6 F7			           out ADC_OutPort, al
 019E  EC			           in al, dx
 019F  F6 D0			           not al
 01A1  C0 E8 00			           shr al, 0
 01A4  3C 00			           cmp al, 0
 01A6  75 02			           jnz AllNotZero 
 01A8  FE C0					   inc al          
 01AA				AllNotZero:
 01AA  C3			           Ret

 01AB				AdcProcessing  ENDP


 01AB				ADCController PROC									;т.к. 2 АЦП, то это подпрограмма для передачи параметров в подпрограмму для работы с АЦП
 01AB  B0 02					   mov al, 00000010b						;передаваемые параметры описаны выше
 01AD  8D 3E 0000 R				   lea di, TemperatureFridge
 01B1  BA 00F7					   mov dx, ADCOutPort1
 01B4  B3 40					   mov bl, 40h
 01B6  E8 FFD9					   call AdcProcessing
 01B9  F6 D0					   not al									;инвертирование результата для холодильника, т.к. температрура положительная
 01BB  88 05					   mov [di], al
 01BD  B0 04					   mov al, 00000100b
 01BF  8D 3E 000B R				   lea di, TemperatureFreezer
 01C3  B3 80					   mov bl, 80h
 01C5  BA 00FD					   mov dx, ADCOutPort2
 01C8  E8 FFC7					   call AdcProcessing
 01CB  88 05					   mov [di], al								;отсутствие инверсии для морозильника, т.к. отрицательная
 01CD  C3					   Ret
 01CE				ADCController ENDP


 01CE				BinaryToBCD PROC NEAR								;подпрограмма для преобразования двичного кода в BCD код по алгоритму Горнера
 01CE  B9 0008					   MOV CX, 8								;передаются: адрес байта данных температуры в двоином коде (bl)
 01D1  8B FE			M2: 	   mov DI, si								;			 адрес ячеек куда запишется результат (si)
 01D3  D0 E3					   SHL BL, 1								;! Преобразованные данные в упакованном формате 
 01D5  51					   PUSH CX
 01D6  B9 0003					   MOV CX, 3
 01D9  8A 05					   M1: MOV AL, [DI]
 01DB  12 05					   ADC AL, [DI]
 01DD  27					   DAA
 01DE  88 05					   MOV [DI], AL
 01E0  47					   INC DI
 01E1  E2 F6					   LOOP M1
 01E3  59					   POP CX
 01E4  E2 EB					   LOOP M2
 01E6  C3					   Ret
 01E7				BinaryToBCD ENDP
					
					
 01E7				BinaryToBCDController PROC							;как и в случае с АЦП, программа для передачи адресов для 2 разных значений
 01E7  8A 1E 0000 R				   mov BL, TemperatureFridge
 01EB  8D 36 0001 R				   lea si, TemperatureFridgeBCD
 01EF  E8 FFDC					   call BinaryToBCD
 01F2  8A 1E 000B R				   mov BL, TemperatureFreezer
 01F6  8D 36 000C R				   lea si, TemperatureFreezerBCD
 01FA  E8 FFD1					   call BinaryToBCD
 01FD  C3					   Ret
 01FE				BinaryToBCDController ENDP


 01FE				UnpackingResult PROC								;т.к. BCD результат у нас запакованный, то распаковываем его
 01FE  8A 04					   mov al, [si]								;передается: адрес запакованного результата (si)
 0200  24 F0					   and al, 11110000b
 0202  8A E0					   mov ah, al
 0204  C0 EC 04					   shr ah, 4
 0207  8A 04					   mov al, [si]
 0209  24 0F					   and al, 00001111b
 020B  8A 5C 01					   mov bl, [si+1]
 020E  88 04					   mov [si], al
 0210  88 64 01					   mov [si+1], ah
 0213  88 5C 02					   mov [si+2], bl
 0216  C3					   Ret
 0217				UnpackingResult ENDP


 0217				UnpackingResultCOntroller PROC						;как и до этого - контроллер для подпрограмм, передаваеммые параметры описаны ранее
 0217  8D 36 0001 R				   lea si, TemperatureFridgeBCD
 021B  E8 FFE0					   call UnpackingResult
 021E  8D 36 000C R				   lea si, TemperatureFreezerBCD
 0222  E8 FFD9					   call UnpackingResult
 0225  C3					   Ret
 0226				UnpackingResultCOntroller ENDP


 0226				SensorTempOut PROC									;подпрограмма для динамического выведения температуры на индикаторы 
 0226  8D 1E 0023 R		           lea bx, DataHexTabl
 022A  B0 FF					   mov al, 0FFh
 022C  E6 FB					   out DisplaySensorOutPowerPort, al	   
 022E  3E: 8A 46 02		           mov al, byte ptr ds:[bp+2]
 0232  D7			           xlat	
 0233  E6 FD			           out DisplaySensorOutPort, al 
 0235  8A D0					   mov dl, al
 0237  8A C4					   mov al, ah        		   
 0239  E6 FB			           out DisplaySensorOutPowerPort, al        
 023B  B0 FF			           mov al, 0FFh            
 023D  E6 FB			           out DisplaySensorOutPowerPort, al
 023F  D0 C4					   rol ah, 1
						   
 0241  3E: 8A 46 01				   mov al, byte ptr ds:[bp+1]                                   
 0245  D7			           xlat	
 0246  0C 80					   or al, 10000000b
 0248  E6 FD			           out DisplaySensorOutPort, al 
 024A  8A D0					   mov dl, al
 024C  8A C4					   mov al, ah            
 024E  E6 FB			           out DisplaySensorOutPowerPort, al        
 0250  B0 FF			           mov al, 0FFh            
 0252  E6 FB			           out DisplaySensorOutPowerPort, al
 0254  D0 C4					   rol ah, 1 
						   
 0256  3E: 8A 46 00				   mov al, byte ptr ds:[bp]                                     
 025A  D7			           xlat	
 025B  E6 FD			           out DisplaySensorOutPort, al 
 025D  8A D0					   mov dl, al
 025F  8A C4					   mov al, ah            
 0261  E6 FB			           out DisplaySensorOutPowerPort, al        
 0263  B0 FF			           mov al, 0FFh            
 0265  E6 FB			           out DisplaySensorOutPowerPort, al
 0267  D0 C4					   rol ah, 1    
 0269  C3			           Ret
 026A				SensorTempOut ENDP


 026A				SensorTempOutControler PROC
 026A  B4 FE					   mov ah, 11111110b;00000001b
 026C  8D 2E 0001 R				   lea bp, TemperatureFridgeBCD		   
 0270  E8 FFB3					   call SensorTempOut
 0273  8D 2E 000C R				   lea bp, TemperatureFreezerBCD
 0277  E8 FFAC					   call SensorTempOut
						   
 027A  B0 FF					   mov al, 0FFh 
 027C  E6 FC					   out DisplayOutPowerPort, al
 027E  B0 40					   mov al, 01000000b						;кусок для вывода минуса
 0280  E6 FD					   out DisplaySensorOutPort, al
 0282  E6 FE					   out DisplayOutPort, al
 0284  B0 7F					   mov al, 01111111b
 0286  E6 FB					   out DisplaySensorOutPowerPort, al
 0288  B0 FF					   mov al, 0FFh            
 028A  E6 FB			           out DisplaySensorOutPowerPort, al
 028C  E6 FC					   out DisplayOutPowerPort, al
 028E  C3					   Ret
 028F				SensorTempOutControler ENDP


 028F				IndicatorTempOut PROC									;подпрограмма для динамического выведения температуры на индикаторы 
 028F  8D 1E 0023 R		           lea bx, DataHexTabl
 0293  B0 FF					   mov al, 0FFh
 0295  E6 FC					   out DisplayOutPowerPort, al	   
 0297  3E: 8A 46 01		           mov al, byte ptr ds:[bp+1]
 029B  D7			           xlat	
 029C  E6 FE			           out DisplayOutPort, al 
 029E  8A D0					   mov dl, al
 02A0  8A C4					   mov al, ah        		   
 02A2  E6 FC			           out DisplayOutPowerPort, al        
 02A4  B0 FF			           mov al, 0FFh            
 02A6  E6 FC			           out DisplayOutPowerPort, al
 02A8  D0 C4					   rol ah, 1

 02AA  3E: 8A 46 00				   mov al, byte ptr ds:[bp]                                     
 02AE  D7			           xlat	
 02AF  E6 FE			           out DisplayOutPort, al 
 02B1  8A D0					   mov dl, al
 02B3  8A C4					   mov al, ah            
 02B5  E6 FC			           out DisplayOutPowerPort, al        
 02B7  B0 FF			           mov al, 0FFh            
 02B9  E6 FC			           out DisplayOutPowerPort, al
 02BB  D0 C4					   rol ah, 1    
 02BD  C3			           Ret
 02BE				IndicatorTempOut ENDP


 02BE				IndicatorTempOutControler PROC
 02BE  B4 FE					   mov ah, 11111110b;00000001b
 02C0  8D 2E 0009 R				   lea bp, SelectedTemperatureFridge   
 02C4  E8 FFC8					   call IndicatorTempOut
 02C7  8D 2E 0014 R				   lea bp, SelectedTemperatureFreezer
 02CB  E8 FFC1					   call IndicatorTempOut
 02CE  C3					   Ret
 02CF				IndicatorTempOutControler ENDP


 02CF				ToZero Proc 										;подпрограмма для очистки ячеек памяти для корректной цикличной работы подпрограммы преобразования данных
						   
 02CF  8D 36 0004 R				   lea si, TemperatureFridgeBCD_Old
 02D3  8D 3E 0001 R				   lea di, TemperatureFridgeBCD
 02D7  8A 05					   mov al, [di]
 02D9  8A 65 01					   mov ah, [di+1]
 02DC  8A 7D 02					   mov bh, [di+2]
 02DF  A2 0004 R				   mov TemperatureFridgeBCD_Old, al
 02E2  88 26 0005 R				   mov TemperatureFridgeBCD_Old+1, ah
 02E6  88 3E 0006 R				   mov TemperatureFridgeBCD_Old+2, bh
 02EA  8D 36 000F R				   lea si, TemperatureFreezerBCD_Old
 02EE  8D 3E 000C R				   lea di, TemperatureFreezerBCD
 02F2  8A 05					   mov al, [di]
 02F4  8A 65 01					   mov ah, [di+1]
 02F7  8A 7D 02					   mov bh, [di+2]
 02FA  A2 000F R				   mov TemperatureFreezerBCD_Old, al
 02FD  88 26 0010 R				   mov TemperatureFreezerBCD_Old+1, ah
 0301  88 3E 0011 R				   mov TemperatureFreezerBCD_Old+2, bh
 0305  B4 00					   mov ah, 0
 0307  88 26 000C R				   mov TemperatureFreezerBCD, ah
 030B  88 26 000D R				   mov TemperatureFreezerBCD+1, ah
 030F  88 26 000E R				   mov TemperatureFreezerBCD+2, ah
 0313  88 26 0001 R				   mov TemperatureFridgeBCD, ah
 0317  88 26 0002 R				   mov TemperatureFridgeBCD+1, ah
 031B  88 26 0003 R				   mov TemperatureFridgeBCD+2, ah
 031F  88 26 0017 R				   mov DoorFreezerOpenFlag, ah
 0323  88 26 0016 R				   mov DoorFridgeOpenFlag, ah
 0327  88 26 0018 R				   mov FreezingFlag, ah
 032B  C3					   Ret
 032C				ToZEro ENDP   


 032C				FreezingFridge PROC
 032C  8A 04					   mov al, [si]
 032E  8A 64 01					   mov ah, [si+1]
 0331  8A 5D 01					   mov bl, [di+1]
 0334  8A 7D 02					   mov bh, [di+2]
 0337  F6 06 002E R 01				   test WaitModeFridge, 01h
 033C  74 06					   jz WaitMode 
 033E  3B C3					   cmp ax, bx
 0340  73 21					   jae NoFreezing
 0342  EB 04					   jmp next
 0344				WaitMode:  
 0344  3B C3					   cmp ax, bx
 0346  77 1B					   ja NoFreezing		   
 0348  03 EA			next:	   add bp, dx
						   
 034A  B0 00					   mov al, 0
 034C  8A 24					   mov ah, [si]
 034E  8A 1D					   mov bl, [di]
 0350  8A 7D 01					   mov bh, [di+1]
 0353  3B C3					   cmp ax, bx
 0355  75 07					   jne WaitMOdeOF
 0357  C6 06 002E R 01				   mov WaitModeFridge, 01h
 035C  EB 05					   Jmp NoFreezing
 035E  C6 06 002E R 00		WaitMOdeOF:mov WaitModeFridge, 00h		   
 0363  C3			NoFreezing:Ret
 0364				FreezingFridge ENDP

 0364				FreezingFreezer PROC
 0364  8A 04					   mov al, [si]
 0366  8A 64 01					   mov ah, [si+1]
 0369  8A 5D 01					   mov bl, [di+1]
 036C  8A 7D 02					   mov bh, [di+2]
 036F  FE C8					   dec al
 0371  3F					   aas
 0372  A3 0030 R				   mov TempretureFreezerOn,ax
 0375  F6 06 002F R 01				   test WaitModeFreezer, 01h	   
 037A  75 06					   jnz toTest	   
 037C  3B C3					   cmp ax, bx
 037E  7C 02					   jl toTest
 0380  03 EA					   add bp, dx 
 0382				toTest:		   
 0382  8A 04					   mov al, [si]
 0384  8A 64 01					   mov ah, [si+1]
 0387  8A 5D 01					   mov bl, [di+1]
 038A  8A 7D 02					   mov bh, [di+2]
 038D  2B C3					   sub ax, bx
 038F  77 05					   Ja Next
 0391  C6 06 002F R 01				   mov WaitModeFreezer, 01h
 0396				Next:	   
 0396  8A 45 01					   mov al, [di+1]
 0399  8A 65 02					   mov ah, [di+2]
 039C  8B 1E 0030 R				   mov bx, TempretureFreezerOn
 03A0  3B C3					   cmp ax, bx
 03A2  7D 05					   jge Exit
 03A4  C6 06 002F R 00				   mov WaitModeFreezer, 00h    
 03A9  C3			Exit:	   Ret
 03AA				FreezingFreezer ENDP


 03AA				FreezingCOntroller PROC
 03AA  B0 00					   mov al, 0h
 03AC  BD 0000					   mov bp, 0h
 03AF  A0 0018 R				   mov al, FreezingFlag
 03B2  A8 01					   test al, 01h
 03B4  75 45					   jnz NotFreez
 03B6  A0 0034 R				   mov al, RepairFlag
 03B9  A8 01					   test al, 01h
 03BB  75 3E					   jnz NotFreez
 03BD  8D 36 0009 R				   lea si, SelectedTemperatureFridge
 03C1  8D 3E 0001 R				   lea di, TemperatureFridgeBCD
 03C5  BA 0001					   mov dx, 1h
 03C8  E8 FF61					   call FreezingFridge
 03CB  8D 36 0014 R				   lea si, SelectedTemperatureFreezer
 03CF  8D 3E 000C R				   lea di, TemperatureFreezerBCD
 03D3  BA 0002					   mov dx, 2h
 03D6  E8 FF8B					   call FreezingFreezer
 03D9  8B C5					   mov ax, bp
 03DB  A8 01					   test al, 01h
 03DD  74 07					   jz NoFridgeCompressor
 03DF  C6 06 0032 R 01				   mov FridgeCompressor, 01h
 03E4  EB 05					   jmp next1
 03E6				NoFridgeCompressor:
 03E6  C6 06 0032 R 00				   mov FridgeCompressor, 00h
 03EB  A8 02			next1:	   test al, 02h
 03ED  74 07					   jz NoFreezerCompressor
 03EF  C6 06 0033 R 02				   mov FreezerCompressor, 02h
 03F4  EB 05					   jmp next2
 03F6				NoFreezerCompressor:
 03F6  C6 06 0033 R 00				   mov FreezerCompressor, 00h
 03FB				next2:	 
 03FB  C3			NotFreez:  Ret
 03FC				FreezingCOntroller ENDP


 03FC				RepairModeFridge PROC 
 03FC  A0 0016 R				   mov al, DoorFridgeOpenFlag
 03FF  A8 01					   test al, 01h
 0401  75 07					   jnz NoDoorOpen
 0403  A0 0018 R				   mov al, FreezingFlag
 0406  A8 01					   test al, 01h
 0408  74 26					   jz Exit
 040A				NoDoorOpen:
 040A  C6 06 0004 R 00				   mov TemperatureFridgeBCD_Old, 0
 040F  C6 06 0005 R 07				   mov TemperatureFridgeBCD_Old+1, 7
 0414  C6 06 0006 R 02				   mov TemperatureFridgeBCD_Old+2, 2 
 0419  8D 36 0001 R				   lea si, TemperatureFridgeBCD
 041D  8A 64 02					   mov ah, [si+2]
 0420  8A 44 01					   mov al, [si+1]
 0423  FE C0					   inc al
 0425  37					   aaa
 0426  A2 0007 R				   mov TemperatureFridgeBCD_Repair, al
 0429  88 26 0008 R				   mov TemperatureFridgeBCD_Repair+1, ah
 042D  E9 008D					   jmp ToEnd
						   
 0430  8D 36 0004 R		Exit:	   lea si, TemperatureFridgeBCD_Old			;
 0434  8D 3E 0001 R				   lea di, TemperatureFridgeBCD				;
 0438  8A 44 02					   mov al, [si+2]
 043B  8A 5D 02					   mov bl, [di+2]
 043E  38 D8					   cmp al, bl
 0440  7C 3E					   jl next
 0442  8A 04					   mov al, [si]								;
 0444  8A 64 01					   mov ah, [si+1]							;
 0447  8A 1D					   mov bl, [di]								;
 0449  8A 7D 01					   mov bh, [di+1]							;
 044C  3B C3					   cmp ax, bx								;переход если текущее значение больше предыдущего
 044E  7E 30					   jle next									;переход если предыдущее значение меньше текущего
 0450  8D 36 0001 R				   lea si, TemperatureFridgeBCD					;
 0454  8D 3E 0007 R				   lea di, TemperatureFridgeBCD_Repair			;
 0458  8A 44 01					   mov al, [si+1]								;
 045B  8A 64 02					   mov ah, [si+2]								;
 045E  FE C0					   inc al										;модификация значения починки
 0460  37					   aaa											;
 0461  8A 3E 000A R				   mov bh, SelectedTemperatureFridge+1			;
 0465  8A 1E 0009 R				   mov bl, SelectedTemperatureFridge			;
 0469  93					   xchg ax,bx									;
 046A  FE C0					   inc al										;
 046C  FE C0					   inc al										;
 046E  37					   aaa											;
 046F  93					   xchg	ax, bx	   								;
 0470  3B D8					   cmp bx, ax									;
 0472  7F 07					   jg NotPossible								;
 0474  88 05					   mov [di], al									;
 0476  88 65 01					   mov [di+1], ah								;
 0479  EB 05					   jmp next		   							;
 047B				NotPossible:											;
 047B  88 1D					   mov [di], bl									;
 047D  88 7D 01					   mov [di+1], bh								;
 0480				next:		
 0480  8D 36 0009 R				   lea si, SelectedTemperatureFridge
 0484  8D 3E 0007 R				   lea di, TemperatureFridgeBCD_Repair
 0488  8A 04					   mov al, [si]
 048A  8A 64 01					   mov ah, [si+1]
 048D  FE C0					   inc al
 048F  FE C0					   inc al
 0491  37					   aaa
 0492  8A 1D					   mov bl, [di]
 0494  8A 7D 01					   mov bh, [di+1]
 0497  3B C3					   cmp ax, bx
 0499  7E 07					   jle next1
 049B  A2 0007 R				   mov TemperatureFridgeBCD_Repair, al
 049E  88 26 0008 R				   mov TemperatureFridgeBCD_Repair+1, ah
						   
 04A2  8D 36 0001 R		next1:	   lea si, TemperatureFridgeBCD				;
 04A6  8D 3E 0007 R				   lea di, TemperatureFridgeBCD_Repair		;
 04AA  8A 44 01					   mov al, [si+1]							;
 04AD  8A 64 02					   mov ah, [si+2]							;сравнение значения починки и текущей температуры
 04B0  8A 1D					   mov bl, [di]								;
 04B2  8A 7D 01					   mov bh, [di+1]							;
 04B5  3B C3					   cmp ax, bx								;
 04B7  7C 04					   jl NoCorrectionNeeded					;переход если текущее значение меньше значения починки
 04B9  81 CD 0080				   or bp, 80h

 04BD				NoCorrectionNeeded:
 04BD  C3			ToEnd:	   Ret
 04BE				RepairModeFridge ENDP


 04BE				RepairModeFreezer PROC 
 04BE  A0 0017 R				   mov al, DoorFreezerOpenFlag
 04C1  A8 01					   test al, 01h
 04C3  75 07					   jnz NoDoorOpen
 04C5  A0 0018 R				   mov al, FreezingFlag
 04C8  A8 01					   test al, 01h
 04CA  74 28					   jz Exit
 04CC				NoDoorOpen:
 04CC  C6 06 000F R 00				   mov TemperatureFreezerBCD_Old, 0
 04D1  C6 06 0010 R 00				   mov TemperatureFreezerBCD_Old+1, 0
 04D6  C6 06 0011 R 00				   mov TemperatureFreezerBCD_Old+2, 0 
 04DB  8D 36 000C R				   lea si, TemperatureFreezerBCD
 04DF  8A 64 02					   mov ah, [si+2]
 04E2  8A 44 01					   mov al, [si+1]
 04E5  FE C8					   dec al
 04E7  FE C8					   dec al
 04E9  3F					   aas
 04EA  A2 0012 R				   mov TemperatureFreezerBCD_Repair, al
 04ED  88 26 0013 R				   mov TemperatureFreezerBCD_Repair+1, ah
 04F1  E9 0092					   jmp ToEnd
 04F4  8D 36 000F R		Exit:	   lea si, TemperatureFreezerBCD_Old
 04F8  8D 3E 000C R				   lea di, TemperatureFreezerBCD
 04FC  8A 44 02					   mov al, [si+2]
 04FF  8A 5D 02					   mov bl, [di+2]
 0502  38 D8					   cmp al, bl
 0504  7F 42					   jg next
 0506  8A 04					   mov al, [si]								;
 0508  8A 64 01					   mov ah, [si+1]							;
 050B  8A 1D					   mov bl, [di]								;
 050D  8A 7D 01					   mov bh, [di+1]							;
 0510  3B C3					   cmp ax, bx								;переход если текущее значение больше предыдущего
 0512  7D 34					   jge next									;переход если предыдущее значение меньше текущего
 0514  8D 36 000C R				   lea si, TemperatureFreezerBCD					;
 0518  8D 3E 0012 R				   lea di, TemperatureFreezerBCD_Repair			;
 051C  8A 44 01					   mov al, [si+1]								;
 051F  8A 64 02					   mov ah, [si+2]								;
 0522  FE C8					   dec al	
 0524  FE C8					   dec al		   ;модификация значения починки
 0526  3F					   aas											;
 0527  8A 3E 0015 R				   mov bh, SelectedTemperatureFreezer+1			;
 052B  8A 1E 0014 R				   mov bl, SelectedTemperatureFreezer			;
 052F  93					   xchg ax,bx									;
 0530  FE C8					   dec al										;
 0532  FE C8					   dec al										;
 0534  FE C8					   dec al										;
 0536  3F					   aas											;
 0537  93					   xchg	ax, bx	   								;
 0538  3B D8					   cmp bx, ax									;
 053A  7C 07					   jl NotPossible								;
 053C  88 05					   mov [di], al									;
 053E  88 65 01					   mov [di+1], ah								;
 0541  EB 05					   jmp next		   								;
 0543				NotPossible:											;
 0543  88 1D					   mov [di], bl									;
 0545  88 7D 01					   mov [di+1], bh								;
 0548				next:		
 0548  8D 36 0014 R				   lea si, SelectedTemperatureFreezer
 054C  8D 3E 0012 R				   lea di, TemperatureFreezerBCD_Repair
 0550  8A 04					   mov al, [si]
 0552  8A 64 01					   mov ah, [si+1]
 0555  FE C0					   inc al
 0557  FE C0					   inc al
 0559  FE C0					   inc al
 055B  37					   aaa
 055C  8A 1D					   mov bl, [di]
 055E  8A 7D 01					   mov bh, [di+1]
 0561  3B C3					   cmp ax, bx
 0563  7D 07					   jge next1
 0565  A2 0012 R				   mov TemperatureFreezerBCD_Repair, al
 0568  88 26 0013 R				   mov TemperatureFreezerBCD_Repair+1, ah
						   
 056C  8D 36 000C R		next1:	   lea si, TemperatureFreezerBCD				;
 0570  8D 3E 0012 R				   lea di, TemperatureFreezerBCD_Repair		;
 0574  8A 44 01					   mov al, [si+1]							;
 0577  8A 64 02					   mov ah, [si+2]							;сравнение значения починки и текущей температуры
 057A  8A 1D					   mov bl, [di]								;
 057C  8A 7D 01					   mov bh, [di+1]							;
 057F  3B C3					   cmp ax, bx								;
 0581  7F 03					   jg NoCorrectionNeeded					;переход если текущее значение меньше значения починки
 0583  83 CD 40					   or bp, 40h

 0586				NoCorrectionNeeded:
 0586  C3			ToEnd:	   Ret
 0587				RepairModeFreezer ENDP


 0587				RepairModeController PROC
 0587  BD 0000					   mov bp, 0h
 058A  E8 FE6F					   call RepairModeFridge
 058D  E8 FF2E					   call RepairModeFreezer
 0590  A0 0018 R				   mov al, FreezingFlag
 0593  A8 01					   test al, 01h
 0595  B0 00					   mov al, 0h
 0597  75 29					   jnz Exit
						   
 0599  B0 00					   mov al, 0h
 059B  0B C5					   or ax, bp
						   
 059D  F7 C5 0080				   test bp, 80h
 05A1  75 0D					   jnz noFridgeCompressor
 05A3  8A 1E 0016 R				   mov bl, DoorFridgeOpenFlag
 05A7  F6 C3 01					   test bl, 01h
 05AA  75 04					   jnz noFridgeCompressor
 05AC  0A 06 0032 R				   or al, FridgeCompressor
 05B0				noFridgeCompressor:
						   
 05B0  A9 0040					   test ax, 40h
 05B3  75 0D					   jnz noFreezerCompressor
 05B5  8A 1E 0017 R				   mov bl, DoorFreezerOpenFlag
 05B9  F6 C3 01					   test bl, 01h
 05BC  75 04					   jnz noFreezerCompressor
 05BE  0A 06 0033 R				   or al, FreezerCompressor
 05C2				noFreezerCompressor:
 05C2				Exit:
 05C2  8B E8					   mov bp, ax
 05C4  E8 00DA					   call TimerRepairCOntroller
 05C7  C3					   Ret
 05C8				RepairModeController ENDP

 05C8				TimerRepairFridge PROC
 05C8  A0 0001 R				   mov al, TemperatureFridgeBCD
 05CB  8A 26 0002 R				   mov ah, TemperatureFridgeBCD+1
 05CF  8A 1E 0004 R				   mov bl, TemperatureFridgeBCD_Old
 05D3  8A 3E 0005 R				   mov bh, TemperatureFridgeBCD_Old+1
 05D7  3B C3					   cmp ax, bx
 05D9  75 38					   jne RepairFridgeCounter
 05DB  A0 0003 R				   mov al, TemperatureFridgeBCD+2
 05DE  8A 1E 0006 R				   mov bl, TemperatureFridgeBCD_Old+2
 05E2  38 D8					   cmp al, bl 
 05E4  75 2D					   jne RepairFridgeCounter
						   
 05E6  F7 C5 0080				   test bp, 0080h
 05EA  75 48					   jnz Exit
 05EC  F7 C5 0001				   test bp, 0001h
 05F0  74 42					   jz Exit
 05F2  F6 06 003D R 01				   test TimeOutFlagFridge, 01h
 05F7  75 2E					   jnz TimeOut
						   
 05F9  A1 0035 R				   mov ax, TimerFridge
 05FC  48					   dec ax
 05FD  A3 0035 R				   mov TimerFridge, ax
 0600  83 F8 00					   cmp ax, 0h
 0603  75 2F					   jne Exit
 0605  A1 0037 R				   mov ax, TimerFridge+2
 0608  83 F8 00					   cmp ax, 0h
 060B  75 1A					   jne TimeOut
 060D  48					   dec ax
 060E  A3 0037 R				   mov TimerFridge+2, ax
 0611  EB 21					   jmp Exit
 0613				RepairFridgeCounter:
 0613  C6 06 003D R 00				   mov TimeOutFlagFridge, 00h
 0618  B8 0FFF					   mov ax, 00FFFh
 061B  BB 005F					   mov bx, 005Fh
 061E  A3 0035 R				   mov TimerFridge, ax
 0621  89 1E 0037 R				   mov TimerFridge+2, bx
 0625  EB 0D					   jmp Exit
 0627				TimeOut:
 0627  C6 06 003D R 01				   mov TimeOutFlagFridge, 01h
 062C  81 E5 00FE				   and bp, 0000000011111110b
 0630  81 CD 0080				   or bp, 0000000010000000b
 0634  C3			Exit:	   Ret
 0635				TimerRepairFridge ENDP

 0635				TimerRepairFreezer PROC
 0635  A0 000C R				   mov al, TemperatureFreezerBCD
 0638  8A 26 000D R				   mov ah, TemperatureFreezerBCD+1
 063C  8A 1E 000F R				   mov bl, TemperatureFreezerBCD_Old
 0640  8A 3E 0010 R				   mov bh, TemperatureFreezerBCD_Old+1
 0644  3B C3					   cmp ax, bx
 0646  75 38					   jne RepairFridgeCounter
 0648  A0 000E R				   mov al, TemperatureFreezerBCD+2
 064B  8A 1E 0011 R				   mov bl, TemperatureFreezerBCD_Old+2
 064F  38 D8					   cmp al, bl 
 0651  75 2D					   jne RepairFridgeCounter
						   
 0653  F7 C5 0040				   test bp, 0040h
 0657  75 47					   jnz Exit
 0659  F7 C5 0002				   test bp, 0002h
 065D  74 41					   jz Exit
 065F  F6 06 003E R 01				   test TimeOutFlagFreezer, 01h
 0664  75 2E					   jnz TimeOut
						   
 0666  A1 0039 R				   mov ax, TimerFreezer
 0669  48					   dec ax
 066A  A3 0039 R				   mov TimerFreezer, ax
 066D  83 F8 00					   cmp ax, 0h
 0670  75 2E					   jne Exit
 0672  A1 003B R				   mov ax, TimerFreezer+2
 0675  83 F8 00					   cmp ax, 0h
 0678  75 1A					   jne TimeOut
 067A  48					   dec ax
 067B  A3 003B R				   mov TimerFreezer+2, ax
 067E  EB 20					   jmp Exit
 0680				RepairFridgeCounter:
 0680  C6 06 003E R 00				   mov TimeOutFlagFreezer, 00h
 0685  B8 0FFF					   mov ax, 00FFFh
 0688  BB 005F					   mov bx, 005Fh
 068B  A3 0039 R				   mov TimerFreezer, ax
 068E  89 1E 003B R				   mov TimerFreezer+2, bx
 0692  EB 0C					   jmp Exit
 0694				TimeOut:
 0694  C6 06 003E R 01				   mov TimeOutFlagFreezer, 01h
 0699  81 E5 00FD				   and bp, 0000000011111101b
 069D  83 CD 40					   or bp, 0000000001000000b
 06A0  C3			Exit:	   Ret
 06A1				TimerRepairFreezer ENDP


 06A1				TimerRepairCOntroller PROC 
 06A1  E8 FF24					   Call TimerRepairFridge
 06A4  E8 FF8E					   Call TimerRepairFreezer
 06A7  C3					   Ret
 06A8				TimerRepairCOntroller ENDP 


 06A8				LightAndModeOutput PROC								
 06A8  8B C5					   mov ax, bp 								
 06AA  F6 06 0016 R 01				   Test DoorFridgeOpenFlag, 1
 06AF  74 02					   jz NoDoorFridgeOpen
 06B1  04 08					   add al, 00001000b
 06B3				NoDoorFridgeOpen:
 06B3  F6 06 0017 R 01				   test DoorFreezerOpenFlag, 1
 06B8  74 02					   jz NoDoorFreezerOpen
 06BA  04 10					   add al, 00010000b
 06BC				NoDoorFreezerOpen:
 06BC  F6 06 0018 R 01				   test FreezingFlag, 1
 06C1  74 02					   jz NoFreezingFlag
 06C3  04 04					   add al, 00000100b
 06C5				NoFreezingFlag:
 06C5  E6 FA					   Out SensorsOutPort, al
 06C7  C3					   Ret
 06C8				LightAndModeOutput ENDP


 06C8				CopyArr PROC
 06C8  B9 000A					   MOV CX, 10 ;Загрузка счётчика циклов
 06CB  8D 1E 0000 R				   LEA BX, HexArr ;Загрузка адреса массива цифр
 06CF  8D 2E 000A R				   LEA BP, HexTabl ;Загрузка адреса таблицы преобразования
 06D3  8D 3E 0019 R				   LEA DI, DataHexArr ;Загрузка адреса массива цифр в сегменте данных
 06D7  8D 36 0023 R				   LEA SI, DataHexTabl ;Загрузка адреса таблицы преобразования в сегменте данных
 06DB				M0:
 06DB  2E: 8A 07				   MOV AL, CS:[BX] ;Чтение цифры из массива в аккумулятор
 06DE  88 05					   MOV [DI], AL ;Запись цифры в сегмент данных/DataHexArr
 06E0  43					   INC BX ;Модификация адреса HexArr
 06E1  47					   INC DI ;Модификация адреса DataHexArr
 06E2  E2 F7					   LOOP M0
							
 06E4  B9 000A					   MOV CX, 10 ;Загрузка счётчика циклов
 06E7				M1:
 06E7  2E: 8A 66 00				   MOV AH, CS:[BP] ;Чтение графического образа из таблицы преобразования
 06EB  88 24					   MOV [SI], AH ;Запись графического образа в сегмент данных/DataHexTabl
 06ED  45					   INC BP ;Модификация адреса HexTabl
 06EE  46					   INC SI ;Модификация адреса DataHexTabl
 06EF  E2 F6					   LOOP M1
 06F1  33 ED					   XOR bp,bp
 06F3  C3					   ret
 06F4				CopyArr ENDP



 06F4				Start:
 06F4  B8 ---- R		           mov   ax,Data
 06F7  8E D8			           mov   ds,ax
 06F9  8E C0			           mov   es,ax
 06FB  B8 ---- R		           mov   ax,Stk
 06FE  8E D0			           mov   ss,ax
 0700  8D 26 0020 R		           lea   sp,StkTop
						   
 0704  E8 F90D					   call Initialization
 0707				MainLoop: 		   
 0707  E8 F9A2					   call ButtonsInput
 070A  E8 F9D4					   call IncDecButtonsInput
 070D  E8 FA9B					   call ADCController
 0710  E8 FAD4					   call BinaryToBCDController
 0713  E8 FB01					   call UnpackingResultCOntroller
 0716  E8 FBA5					   call IndicatorTempOutControler
						   ;call SensorTempOutControler
 0719  E8 FC8E					   call FreezingCOntroller
 071C  E8 FE68					   call RepairModeController   
 071F  E8 FF86					   call LightAndModeOutput
 0722  E8 FBAA					   call ToZero
 0725  EB E0					   jmp MainLoop
				;Здесь размещается код программы


				;В следующей строке необходимо указать смещение стартовой точки
				           org   RomSize-16-((InitDataEnd-InitDataStart+15) AND 0FFF0h)
				           ASSUME cs:NOTHING
 0FF0  EA ---- 06F4 R		           jmp   Far Ptr Start
 0FF5				Code       ENDS
				END		Start
Microsoft (R) Macro Assembler Version 6.14.8444		    06/07/23 21:46:28
ъєЁёрў.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

Code . . . . . . . . . . . . . .	16 Bit	 0FF5	  Para	  Private 
Data . . . . . . . . . . . . . .	16 Bit	 003F	  Abs	  Private 
InitData . . . . . . . . . . . .	16 Bit	 0000	  Para	  Private 
IntTable . . . . . . . . . . . .	16 Bit	 0000	  Abs	  Private 
Stk  . . . . . . . . . . . . . .	16 Bit	 0020	  Abs	  Private 


Procedures,  parameters and locals:

                N a m e                 Type     Value    Attr

ADCController  . . . . . . . . .	P Near	 01AB	  Code	Length= 0023 Public
AdcProcessing  . . . . . . . . .	P Near	 0192	  Code	Length= 0019 Public
  SCtrl1 . . . . . . . . . . . .	L Near	 0194	  Code	
  AllNotZero . . . . . . . . . .	L Near	 01AA	  Code	
BinaryToBCDController  . . . . .	P Near	 01E7	  Code	Length= 0017 Public
BinaryToBCD  . . . . . . . . . .	P Near	 01CE	  Code	Length= 0019 Public
  M2 . . . . . . . . . . . . . .	L Near	 01D1	  Code	
  M1 . . . . . . . . . . . . . .	L Near	 01D9	  Code	
ButtonsInput . . . . . . . . . .	P Near	 00AC	  Code	Length= 0020 Public
  NoDoorFridgeOpen . . . . . . .	L Near	 00B9	  Code	
  NoDoorFreezerOpen  . . . . . .	L Near	 00C2	  Code	
  NoFreezingFlag . . . . . . . .	L Near	 00CB	  Code	
ContactBounceSupressing  . . . .	P Near	 00CC	  Code	Length= 0015 Public
  VD1  . . . . . . . . . . . . .	L Near	 00CC	  Code	
  VD2  . . . . . . . . . . . . .	L Near	 00D0	  Code	
CopyArr  . . . . . . . . . . . .	P Near	 06C8	  Code	Length= 002C Public
  M0 . . . . . . . . . . . . . .	L Near	 06DB	  Code	
  M1 . . . . . . . . . . . . . .	L Near	 06E7	  Code	
FreezingCOntroller . . . . . . .	P Near	 03AA	  Code	Length= 0052 Public
  NoFridgeCompressor . . . . . .	L Near	 03E6	  Code	
  next1  . . . . . . . . . . . .	L Near	 03EB	  Code	
  NoFreezerCompressor  . . . . .	L Near	 03F6	  Code	
  next2  . . . . . . . . . . . .	L Near	 03FB	  Code	
  NotFreez . . . . . . . . . . .	L Near	 03FB	  Code	
FreezingFreezer  . . . . . . . .	P Near	 0364	  Code	Length= 0046 Public
  toTest . . . . . . . . . . . .	L Near	 0382	  Code	
  Next . . . . . . . . . . . . .	L Near	 0396	  Code	
  Exit . . . . . . . . . . . . .	L Near	 03A9	  Code	
FreezingFridge . . . . . . . . .	P Near	 032C	  Code	Length= 0038 Public
  WaitMode . . . . . . . . . . .	L Near	 0344	  Code	
  next . . . . . . . . . . . . .	L Near	 0348	  Code	
  WaitMOdeOF . . . . . . . . . .	L Near	 035E	  Code	
  NoFreezing . . . . . . . . . .	L Near	 0363	  Code	
IncDecButtonsInput . . . . . . .	P Near	 00E1	  Code	Length= 00B1 Public
  NotMax1  . . . . . . . . . . .	L Near	 0112	  Code	
  NoPress1 . . . . . . . . . . .	L Near	 0121	  Code	
  NotMax2  . . . . . . . . . . .	L Near	 0138	  Code	
  NoPress2 . . . . . . . . . . .	L Near	 0147	  Code	
  NotMax3  . . . . . . . . . . .	L Near	 015E	  Code	
  NoPress3 . . . . . . . . . . .	L Near	 016D	  Code	
  NotMax4  . . . . . . . . . . .	L Near	 0184	  Code	
  NoPressedButton  . . . . . . .	L Near	 0191	  Code	
IndicatorTempOutControler  . . .	P Near	 02BE	  Code	Length= 0011 Public
IndicatorTempOut . . . . . . . .	P Near	 028F	  Code	Length= 002F Public
Initialization . . . . . . . . .	P Near	 0014	  Code	Length= 0098 Public
LightAndModeOutput . . . . . . .	P Near	 06A8	  Code	Length= 0020 Public
  NoDoorFridgeOpen . . . . . . .	L Near	 06B3	  Code	
  NoDoorFreezerOpen  . . . . . .	L Near	 06BC	  Code	
  NoFreezingFlag . . . . . . . .	L Near	 06C5	  Code	
RepairModeController . . . . . .	P Near	 0587	  Code	Length= 0041 Public
  noFridgeCompressor . . . . . .	L Near	 05B0	  Code	
  noFreezerCompressor  . . . . .	L Near	 05C2	  Code	
  Exit . . . . . . . . . . . . .	L Near	 05C2	  Code	
RepairModeFreezer  . . . . . . .	P Near	 04BE	  Code	Length= 00C9 Public
  NoDoorOpen . . . . . . . . . .	L Near	 04CC	  Code	
  Exit . . . . . . . . . . . . .	L Near	 04F4	  Code	
  NotPossible  . . . . . . . . .	L Near	 0543	  Code	
  next . . . . . . . . . . . . .	L Near	 0548	  Code	
  next1  . . . . . . . . . . . .	L Near	 056C	  Code	
  NoCorrectionNeeded . . . . . .	L Near	 0586	  Code	
  ToEnd  . . . . . . . . . . . .	L Near	 0586	  Code	
RepairModeFridge . . . . . . . .	P Near	 03FC	  Code	Length= 00C2 Public
  NoDoorOpen . . . . . . . . . .	L Near	 040A	  Code	
  Exit . . . . . . . . . . . . .	L Near	 0430	  Code	
  NotPossible  . . . . . . . . .	L Near	 047B	  Code	
  next . . . . . . . . . . . . .	L Near	 0480	  Code	
  next1  . . . . . . . . . . . .	L Near	 04A2	  Code	
  NoCorrectionNeeded . . . . . .	L Near	 04BD	  Code	
  ToEnd  . . . . . . . . . . . .	L Near	 04BD	  Code	
SensorTempOutControler . . . . .	P Near	 026A	  Code	Length= 0025 Public
SensorTempOut  . . . . . . . . .	P Near	 0226	  Code	Length= 0044 Public
TimerRepairCOntroller  . . . . .	P Near	 06A1	  Code	Length= 0007 Public
TimerRepairFreezer . . . . . . .	P Near	 0635	  Code	Length= 006C Public
  RepairFridgeCounter  . . . . .	L Near	 0680	  Code	
  TimeOut  . . . . . . . . . . .	L Near	 0694	  Code	
  Exit . . . . . . . . . . . . .	L Near	 06A0	  Code	
TimerRepairFridge  . . . . . . .	P Near	 05C8	  Code	Length= 006D Public
  RepairFridgeCounter  . . . . .	L Near	 0613	  Code	
  TimeOut  . . . . . . . . . . .	L Near	 0627	  Code	
  Exit . . . . . . . . . . . . .	L Near	 0634	  Code	
ToZero . . . . . . . . . . . . .	P Near	 02CF	  Code	Length= 005D Public
UnpackingResultCOntroller  . . .	P Near	 0217	  Code	Length= 000F Public
UnpackingResult  . . . . . . . .	P Near	 01FE	  Code	Length= 0019 Public


Symbols:

                N a m e                 Type     Value    Attr

ADCOutPort1  . . . . . . . . . .	Number	 00F7h	 
ADCOutPort2  . . . . . . . . . .	Number	 00FDh	 
ADC_InPort . . . . . . . . . . .	Number	 00FEh	 
ADC_OutPort  . . . . . . . . . .	Number	 00F7h	 
ButtonInPort . . . . . . . . . .	Number	 00FEh	 
CompressorsPort  . . . . . . . .	Number	 00FAh	 
DataHexArr . . . . . . . . . . .	Byte	 0019	  Data	
DataHexTabl  . . . . . . . . . .	Byte	 0023	  Data	
DisplayOutPort . . . . . . . . .	Number	 00FEh	 
DisplayOutPowerPort  . . . . . .	Number	 00FCh	 
DisplaySensorOutPort . . . . . .	Number	 00FDh	 
DisplaySensorOutPowerPort  . . .	Number	 00FBh	 
DoorFreezerOpenFlag  . . . . . .	Byte	 0017	  Data	
DoorFridgeOpenFlag . . . . . . .	Byte	 0016	  Data	
FreezerCompressor  . . . . . . .	Byte	 0033	  Data	
FreezingFlag . . . . . . . . . .	Byte	 0018	  Data	
FridgeCompressor . . . . . . . .	Byte	 0032	  Data	
HexArr . . . . . . . . . . . . .	Byte	 0000	  Code	
HexTabl  . . . . . . . . . . . .	Byte	 000A	  Code	
IncDecButtonPort . . . . . . . .	Number	 00FCh	 
InitDataEnd  . . . . . . . . . .	L Near	 0000	  InitData	
InitDataStart  . . . . . . . . .	L Near	 0000	  InitData	
MainLoop . . . . . . . . . . . .	L Near	 0707	  Code	
NMax . . . . . . . . . . . . . .	Number	 0032h	 
OldIncDecButtonsImage  . . . . .	Byte	 002D	  Data	
RepairFlag . . . . . . . . . . .	Byte	 0034	  Data	
RomSize  . . . . . . . . . . . .	Number	 1000h	 
SelectedTemperatureFreezer . . .	Byte	 0014	  Data	
SelectedTemperatureFridge  . . .	Byte	 0009	  Data	
SensorsOutPort . . . . . . . . .	Number	 00FAh	 
Start  . . . . . . . . . . . . .	L Near	 06F4	  Code	
StkTop . . . . . . . . . . . . .	Word	 0020	  Stk	
TemperatureFreezerBCD_Old  . . .	Byte	 000F	  Data	
TemperatureFreezerBCD_Repair . .	Byte	 0012	  Data	
TemperatureFreezerBCD  . . . . .	Byte	 000C	  Data	
TemperatureFreezer . . . . . . .	Byte	 000B	  Data	
TemperatureFridgeBCD_Old . . . .	Byte	 0004	  Data	
TemperatureFridgeBCD_Repair  . .	Byte	 0007	  Data	
TemperatureFridgeBCD . . . . . .	Byte	 0001	  Data	
TemperatureFridge  . . . . . . .	Byte	 0000	  Data	
TempretureFreezerOn  . . . . . .	Word	 0030	  Data	
TimeOutFlagFreezer . . . . . . .	Byte	 003E	  Data	
TimeOutFlagFridge  . . . . . . .	Byte	 003D	  Data	
TimerFreezer . . . . . . . . . .	Word	 0039	  Data	
TimerFridge  . . . . . . . . . .	Word	 0035	  Data	
WaitModeFreezer  . . . . . . . .	Byte	 002F	  Data	
WaitModeFridge . . . . . . . . .	Byte	 002E	  Data	

	   0 Warnings
	   0 Errors
